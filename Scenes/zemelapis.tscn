[gd_scene load_steps=23 format=3 uid="uid://brvo832id34ap"]

[ext_resource type="MeshLibrary" uid="uid://bnn22ovaht85a" path="res://Bookbearers/Tiles/Tileszemelap.tres" id="1_fck5j"]
[ext_resource type="Script" path="res://Bookbearers/Code/zemelapis.gd" id="1_oowoj"]
[ext_resource type="Script" path="res://Bookbearers/Code/Camera3DMap.gd" id="3_f5m4d"]
[ext_resource type="Material" uid="uid://dk1faek2xgva7" path="res://Bookbearers/Materials/playerexplore.tres" id="4_x45uc"]
[ext_resource type="Material" uid="uid://waivying8h2e" path="res://Bookbearers/Materials/zandar.tres" id="5_gburw"]
[ext_resource type="Environment" uid="uid://dl2acpk2i6h63" path="res://Bookbearers/Materials/envirment.tres" id="6_u8oho"]
[ext_resource type="Texture2D" uid="uid://ctv2ny2uy6may" path="res://Bookbearers/Textures/cloudkrita.png" id="7_ah4j4"]

[sub_resource type="BoxShape3D" id="BoxShape3D_vna6o"]

[sub_resource type="PlaneMesh" id="PlaneMesh_ctong"]
material = ExtResource("4_x45uc")
size = Vector2(1.25, 2)

[sub_resource type="BoxShape3D" id="BoxShape3D_7my7i"]
size = Vector3(1.22839, 0.363525, 1.77177)

[sub_resource type="CylinderMesh" id="CylinderMesh_ct4yn"]
height = 0.1

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_nwsnp"]
albedo_color = Color(0.0360225, 0.139905, 0.339232, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_dxk3a"]
size = Vector3(4.36224, 1.91614, 1.04297)

[sub_resource type="PlaneMesh" id="PlaneMesh_x03e1"]
material = ExtResource("5_gburw")
size = Vector2(1.25, 2)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_ytvpx"]
data = PackedVector3Array(0, -0.6007, -1.5017, -1.3081, -0.6007, -0.6007, 1.3081, -0.6007, -0.6007, 1.3081, -0.6007, -0.6007, -1.3081, -0.6007, -0.6007, 1.3081, -0.6007, 0.6007, 1.3081, -0.6007, 0.6007, -1.3081, -0.6007, -0.6007, 0, -0.6007, 1.5017, 0, -0.6007, 1.5017, -1.3081, -0.6007, -0.6007, -1.3081, -0.6007, 0.6007, 0, 0.6007, 1.5017, 0, -0.6007, 1.5017, -1.3081, 0.6007, 0.6007, -1.3081, 0.6007, 0.6007, 0, -0.6007, 1.5017, -1.3081, -0.6007, 0.6007, -1.3081, 0.6007, 0.6007, -1.3081, -0.6007, 0.6007, -1.3081, 0.6007, -0.6007, -1.3081, 0.6007, -0.6007, -1.3081, -0.6007, 0.6007, -1.3081, -0.6007, -0.6007, 1.3081, 0.6007, -0.6007, 1.3081, -0.6007, -0.6007, 1.3081, 0.6007, 0.6007, 1.3081, 0.6007, 0.6007, 1.3081, -0.6007, -0.6007, 1.3081, -0.6007, 0.6007, 0, 0.6007, -1.5017, 0, -0.6007, -1.5017, 1.3081, 0.6007, -0.6007, 1.3081, 0.6007, -0.6007, 0, -0.6007, -1.5017, 1.3081, -0.6007, -0.6007, -1.3081, 0.6007, -0.6007, -1.3081, -0.6007, -0.6007, 0, 0.6007, -1.5017, 0, 0.6007, -1.5017, -1.3081, -0.6007, -0.6007, 0, -0.6007, -1.5017, 1.3081, 0.6007, 0.6007, 1.3081, -0.6007, 0.6007, 0, 0.6007, 1.5017, 0, 0.6007, 1.5017, 1.3081, -0.6007, 0.6007, 0, -0.6007, 1.5017, 0, 0.6007, -1.5017, 1.3081, 0.6007, -0.6007, -1.3081, 0.6007, -0.6007, -1.3081, 0.6007, -0.6007, 1.3081, 0.6007, -0.6007, -1.3081, 0.6007, 0.6007, -1.3081, 0.6007, 0.6007, 1.3081, 0.6007, -0.6007, 0, 0.6007, 1.5017, 0, 0.6007, 1.5017, 1.3081, 0.6007, -0.6007, 1.3081, 0.6007, 0.6007)

[sub_resource type="Gradient" id="Gradient_wau2e"]

[sub_resource type="GradientTexture2D" id="GradientTexture2D_ll6vl"]
gradient = SubResource("Gradient_wau2e")
width = 100
height = 50
fill_to = Vector2(0, 0)

[sub_resource type="Gradient" id="Gradient_05kbu"]
offsets = PackedFloat32Array(0.994845, 1)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_s6b4g"]
gradient = SubResource("Gradient_05kbu")
width = 150
height = 50
fill_from = Vector2(1, 0)

[sub_resource type="BoxMesh" id="BoxMesh_ypvfa"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_56dvv"]
shading_mode = 0
albedo_texture = ExtResource("7_ah4j4")
heightmap_enabled = true

[sub_resource type="SphereMesh" id="SphereMesh_4ibw6"]
material = SubResource("StandardMaterial3D_56dvv")
flip_faces = true

[node name="Zemelapis" type="Node3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.745014, 0, 0)
script = ExtResource("1_oowoj")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 6.31636, 0)

[node name="GridMap" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0, 4.76837e-07, 1.90735e-06)
mesh_library = ExtResource("1_fck5j")
cell_size = Vector3(2, 2, 2.3)
cell_center_x = false
cell_center_y = false
cell_center_z = false
cell_scale = 0.8
data = {
"cells": PackedInt32Array(0, 65528, 1441793, 0, 65529, 1441793, 0, 65533, 1048577, 0, 65534, 1441793, 0, 65535, 1441793, 0, 0, 1441793, 0, 1, 1441793, 0, 2, 1441793, 0, 65530, 1441793, 0, 65531, 1441793, 0, 65532, 1441793, 0, 65527, 1441793, 0, 65526, 1441793, 0, 65525, 1441793, 0, 65524, 1441793, 0, 65523, 1441793, 0, 65522, 1441793, 0, 65521, 1441793, 0, 65520, 1441793, 0, 65519, 1441793, 0, 65518, 1441793, 0, 65517, 1441793, 0, 65516, 1441793, 0, 65515, 1441793, 0, 65514, 1441793, 0, 65513, 1441793, 0, 65512, 1441793, 0, 65511, 1441793, 0, 65510, 1441793, 0, 65509, 1441793, 0, 65508, 1441793)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="GridMap2" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0, 1.90735e-06, 1.90735e-06)
mesh_library = ExtResource("1_fck5j")
cell_size = Vector3(3.7, 2, 2.3)
cell_center_y = false
cell_scale = 0.8
data = {
"cells": PackedInt32Array(0, 65535, 1441793, 65535, 65535, 1441793, 65535, 65533, 1048577, 65535, 65532, 1048577, 65535, 65529, 1441793, 0, 65529, 1441793, 65535, 65528, 1441793, 0, 65528, 1441793, 1, 65535, 1441793, 0, 65525, 1441793, 65535, 65525, 1441793, 65533, 65525, 1441793, 0, 65519, 1441793, 65535, 65519, 1441793, 65535, 65518, 1441793, 0, 65518, 1441793, 0, 65513, 1441793, 1, 65512, 1441793, 65535, 65513, 1441793, 65534, 65513, 1441793, 0, 65508, 1441793, 65535, 65508, 1441793, 65535, 65507, 1441793, 0, 65507, 1441793, 65534, 65525, 1441793)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="GridMap3" type="GridMap" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0, 1.90735e-06, 1.90735e-06)
mesh_library = ExtResource("1_fck5j")
cell_size = Vector3(1.84, 2, 2.3)
cell_center_x = false
cell_center_y = false
cell_center_z = false
cell_scale = 0.8
data = {
"cells": PackedInt32Array(65534, 0, 1048577, 2, 65535, 1441793, 65534, 65525, 1441793, 65532, 65526, 1441793, 2, 65525, 1441793, 2, 65513, 1441793, 4, 65513, 1441793, 65534, 65513, 1441793, 65532, 65513, 1441793)
}

[node name="StaticBody3D2" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 0.967396, 0.253268, 0, -0.253268, 0.967396, -0.288049, 2.53292, 6.87173)
collision_layer = 128
input_ray_pickable = false
script = ExtResource("3_f5m4d")

[node name="Camera3D" type="Camera3D" parent="StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0.514875, 0, 0)

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D2"]
transform = Transform3D(1, 0, 0, 0, 1, -2.98023e-08, 0, 2.98023e-08, 1, 0, 0, 0)
shape = SubResource("BoxShape3D_vna6o")

[node name="player" type="MeshInstance3D" parent="."]
unique_name_in_owner = true
transform = Transform3D(0.5, 0, 0, 0, -2.18557e-08, -0.5, 0, 0.5, -2.18557e-08, 0, 1, 4.6)
mesh = SubResource("PlaneMesh_ctong")
skeleton = NodePath("")

[node name="Area3D" type="Area3D" parent="player"]
collision_layer = 4
collision_mask = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="player/Area3D"]
shape = SubResource("BoxShape3D_7my7i")

[node name="Camera3D2" type="Camera3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, -0.264108, 0.964493, 0, -0.964493, -0.264108, 0, 3.5, -1.38958)

[node name="MeshInstance3D" type="MeshInstance3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, -1, 0, 1, -4.37114e-08, 0, 0, 0.97907)
mesh = SubResource("CylinderMesh_ct4yn")
surface_material_override/0 = SubResource("StandardMaterial3D_nwsnp")

[node name="StaticBody3D3" type="StaticBody3D" parent="."]
transform = Transform3D(33.615, 0, 0, 0, 33.615, 0, 0, 0, 33.615, 0, 0, -49.8416)
collision_mask = 128

[node name="CollisionShape3D" type="CollisionShape3D" parent="StaticBody3D3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.215488, 0.458069, 2.34213)
shape = SubResource("BoxShape3D_dxk3a")

[node name="CollisionShape3D2" type="CollisionShape3D" parent="StaticBody3D3"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.215, 0.458, -1.52735)
shape = SubResource("BoxShape3D_dxk3a")

[node name="CollisionShape3D3" type="CollisionShape3D" parent="StaticBody3D3"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -0.906205, 0.458, 1.045)
shape = SubResource("BoxShape3D_dxk3a")

[node name="CollisionShape3D4" type="CollisionShape3D" parent="StaticBody3D3"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0.855699, 0.458, 1.045)
shape = SubResource("BoxShape3D_dxk3a")

[node name="enemy" type="MeshInstance3D" parent="."]
transform = Transform3D(0.5, 0, 0, 0, -2.18557e-08, -0.5, 0, 0.5, -2.18557e-08, -0.0645376, 0.950891, -2.24148)
mesh = SubResource("PlaneMesh_x03e1")
skeleton = NodePath("")

[node name="Area3D" type="Area3D" parent="enemy"]
collision_layer = 2
collision_mask = 4
input_ray_pickable = false
monitoring = false
monitorable = false

[node name="CollisionShape3D2" type="CollisionShape3D" parent="enemy/Area3D"]
transform = Transform3D(-0.0243463, -6.3729e-08, -1.4998, -1.4998, 1.13232e-07, 0.0243463, 1.12183e-07, 1.5, -6.55584e-08, 0.124708, -0.0912004, -4.76837e-07)
shape = SubResource("ConcavePolygonShape3D_ytvpx")

[node name="lang" type="Node3D" parent="."]
unique_name_in_owner = true

[node name="Node3D" type="Node3D" parent="."]

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="Panel" type="Panel" parent="CanvasLayer"]
self_modulate = Color(1, 1, 1, 0)
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 3
size_flags_vertical = 3
mouse_filter = 1
metadata/_edit_use_anchors_ = true

[node name="TextureRect" type="TextureButton" parent="CanvasLayer/Panel"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.902778
anchor_top = 0.910494
anchor_right = 0.989584
anchor_bottom = 0.987654
grow_horizontal = 0
grow_vertical = 0
texture_normal = SubResource("GradientTexture2D_ll6vl")
stretch_mode = 0
metadata/_edit_use_anchors_ = true

[node name="Label" type="Label" parent="CanvasLayer/Panel/TextureRect"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -35.0
offset_top = -11.5
offset_right = 35.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
text = "End Turn"
metadata/_edit_use_anchors_ = true

[node name="TextureRect2" type="TextureRect" parent="CanvasLayer/Panel"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.869792
anchor_right = 1.0
anchor_bottom = 0.0771605
offset_left = 50.0
grow_horizontal = 0
texture = SubResource("GradientTexture2D_s6b4g")
metadata/_edit_use_anchors_ = true

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/Panel/TextureRect2"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
metadata/_edit_use_anchors_ = true

[node name="Label" type="Label" parent="CanvasLayer/Panel/TextureRect2/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
text = "Quests:"

[node name="RichTextLabel" type="RichTextLabel" parent="CanvasLayer/Panel/TextureRect2/VBoxContainer"]
layout_mode = 2
size_flags_vertical = 3
scroll_following = true
metadata/_edit_use_anchors_ = true

[node name="VilkoNamai" type="MeshInstance3D" parent="."]
transform = Transform3D(0.5, 0, 0, 0, -2.18557e-08, -0.5, 0, 0.5, -2.18557e-08, 5.51536, 0.851351, -1.59206)
mesh = SubResource("BoxMesh_ypvfa")

[node name="WereHouse" type="Area3D" parent="VilkoNamai"]
collision_layer = 2
collision_mask = 4
input_ray_pickable = false

[node name="CollisionShape3D2" type="CollisionShape3D" parent="VilkoNamai/WereHouse"]
transform = Transform3D(-0.0243463, -6.3729e-08, -1.4998, -1.4998, 1.13232e-07, 0.0243463, 1.12183e-07, 1.5, -6.55584e-08, 0.125815, 0.975832, -4.76837e-07)
shape = SubResource("ConcavePolygonShape3D_ytvpx")

[node name="Label3D" type="Label3D" parent="VilkoNamai"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, -0.828259)
visible = false
text = "Space"

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("6_u8oho")

[node name="MeshInstance3D" type="MeshInstance3D" parent="WorldEnvironment"]
transform = Transform3D(500, 0, 0, 0, 500, 0, 0, 0, 500, -11.3278, 87.8008, -5.20008)
mesh = SubResource("SphereMesh_4ibw6")

[node name="EglesNamai" type="MeshInstance3D" parent="."]
transform = Transform3D(0.5, 0, 0, 0, -2.18557e-08, -0.5, 0, 0.5, -2.18557e-08, -7.37154, 0.851351, -23.3044)
mesh = SubResource("BoxMesh_ypvfa")

[node name="TreeHouse" type="Area3D" parent="EglesNamai"]
collision_layer = 2
collision_mask = 4
input_ray_pickable = false

[node name="CollisionShape3D2" type="CollisionShape3D" parent="EglesNamai/TreeHouse"]
transform = Transform3D(-0.0243463, -6.3729e-08, -1.4998, -1.4998, 1.13232e-07, 0.0243463, 1.12183e-07, 1.5, -6.55584e-08, 0.125815, 0.975832, -4.76837e-07)
shape = SubResource("ConcavePolygonShape3D_ytvpx")

[node name="Label3D" type="Label3D" parent="EglesNamai"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, -0.828259)
visible = false
text = "Space"

[node name="RobotoNamai" type="MeshInstance3D" parent="."]
transform = Transform3D(0.5, 0, 0, 0, -2.18557e-08, -0.5, 0, 0.5, -2.18557e-08, 7.32197, 0.851351, -53.3448)
mesh = SubResource("BoxMesh_ypvfa")

[node name="MetalHouse" type="Area3D" parent="RobotoNamai"]
collision_layer = 2
collision_mask = 4
input_ray_pickable = false

[node name="CollisionShape3D2" type="CollisionShape3D" parent="RobotoNamai/MetalHouse"]
transform = Transform3D(-0.0243463, -6.3729e-08, -1.4998, -1.4998, 1.13232e-07, 0.0243463, 1.12183e-07, 1.5, -6.55584e-08, 0.125815, 0.975832, -4.76837e-07)
shape = SubResource("ConcavePolygonShape3D_ytvpx")

[node name="Label3D" type="Label3D" parent="RobotoNamai"]
transform = Transform3D(1, 0, 0, 0, -4.37114e-08, 1, 0, -1, -4.37114e-08, 0, 0, -0.828259)
visible = false
text = "Space"

[connection signal="input_event" from="player/Area3D" to="." method="_on_area_3d_input_event"]
[connection signal="input_event" from="player/Area3D" to="GridMap" method="_on_area_3d_input_event"]
[connection signal="input_event" from="player/Area3D" to="GridMap2" method="_on_area_3d_input_event"]
[connection signal="input_event" from="player/Area3D" to="GridMap3" method="_on_area_3d_input_event"]
[connection signal="area_shape_entered" from="enemy/Area3D" to="." method="_on_area_3d_area_shape_entered"]
[connection signal="pressed" from="CanvasLayer/Panel/TextureRect" to="." method="_on_texture_rect_pressed"]
[connection signal="pressed" from="CanvasLayer/Panel/TextureRect" to="GridMap" method="_on_texture_rect_pressed"]
[connection signal="pressed" from="CanvasLayer/Panel/TextureRect" to="GridMap2" method="_on_texture_rect_pressed"]
[connection signal="pressed" from="CanvasLayer/Panel/TextureRect" to="GridMap3" method="_on_texture_rect_pressed"]
[connection signal="area_shape_entered" from="VilkoNamai/WereHouse" to="." method="_on_were_house_area_shape_entered"]
[connection signal="area_shape_exited" from="VilkoNamai/WereHouse" to="." method="_on_were_house_area_shape_exited"]
[connection signal="area_shape_entered" from="EglesNamai/TreeHouse" to="." method="_on_tree_house_area_shape_entered"]
[connection signal="area_shape_exited" from="EglesNamai/TreeHouse" to="." method="_on_tree_house_area_shape_exited"]
[connection signal="area_shape_entered" from="RobotoNamai/MetalHouse" to="." method="_on_metal_house_area_shape_entered"]
[connection signal="area_shape_exited" from="RobotoNamai/MetalHouse" to="." method="_on_metal_house_area_shape_exited"]
